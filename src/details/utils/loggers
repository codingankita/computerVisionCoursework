This code defines two classes: `Logger` and `RankLogger`.

`Logger` is a class that can be used to write console output to an external text file. The constructor of `Logger` takes a file path (`fpath`) as an argument. If `fpath` is not `None`, it creates a new file (if it does not exist) and sets `self.file` to point to this file. Then it overrides the `write()`, `flush()`, and `close()` methods of `sys.stdout` so that they also write to `self.file` if it is not `None`. 

`RankLogger` is a class that records the rank1 matching accuracy obtained for each test dataset at specified evaluation steps and provides a function to show the summarized results. The constructor of `RankLogger` takes two lists of strings (`source_names` and `target_names`) as arguments. `source_names` is a list of names of source datasets, and `target_names` is a list of names of target datasets. The `write()` method of `RankLogger` takes three arguments: the name of the target dataset (`name`), the epoch number (`epoch`), and the rank1 matching accuracy (`rank1`). It appends `epoch` and `rank1` to the corresponding lists of `name` in the `logger` dictionary of `self`. Finally, the `show_summary()` method of `RankLogger` prints the summarized results of the target datasets. It prints the name of the target dataset and its corresponding source dataset (from `source_names`), and then prints the epoch number and rank1 matching accuracy for each evaluation step.
